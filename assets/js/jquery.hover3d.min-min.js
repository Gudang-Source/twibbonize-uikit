!function(e){e.fn.hover3d=function(t){var r=e.extend({selector:null,perspective:1e3,sensitivity:20,invert:!1,shine:!1,hoverInClass:"hover-in",hoverOutClass:"hover-out",hoverClass:"hover-3d"},t);return this.each((function(){var t=e(this),s=t.find(r.selector);currentX=0,currentY=0,r.shine&&s.append('<div class="shine"></div>');var n=e(this).find(".shine");t.css({perspective:r.perspective+"px",transformStyle:"preserve-3d"}),s.css({perspective:r.perspective+"px",transformStyle:"preserve-3d"}),n.css({position:"absolute",top:0,left:0,bottom:0,right:0,transform:"translateZ(1px)","z-index":9}),t.on("mouseenter",(function(){return s.addClass(r.hoverInClass+" "+r.hoverClass),currentX=currentY=0,void setTimeout((function(){s.removeClass(r.hoverInClass)}),1e3)})),t.on("mousemove",(function(e){return function(e){var t=s.innerWidth(),o=s.innerHeight(),i=Math.round(e.pageX-s.offset().left),a=Math.round(e.pageY-s.offset().top),v=r.invert?(t/2-i)/r.sensitivity:-(t/2-i)/r.sensitivity,c=r.invert?-(o/2-a)/r.sensitivity:(o/2-a)/r.sensitivity,p=i-t/2,u=a-o/2,h=180*Math.atan2(u,p)/Math.PI-90;0>h&&(h+=360),s.css({perspective:r.perspective+"px",transformStyle:"preserve-3d",transform:"rotateY("+v+"deg) rotateX("+c+"deg)"}),n.css("background","linear-gradient("+h+"deg, rgba(255,255,255,"+e.offsetY/o*.5+") 0%,rgba(255,255,255,0) 80%)")}(e)})),t.on("mouseleave",(function(){return s.addClass(r.hoverOutClass+" "+r.hoverClass),s.css({perspective:r.perspective+"px",transformStyle:"preserve-3d",transform:"rotateX(0) rotateY(0)"}),void setTimeout((function(){s.removeClass(r.hoverOutClass+" "+r.hoverClass),currentX=currentY=0}),1e3)}))}))}}(jQuery);